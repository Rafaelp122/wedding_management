{% with w=item.wedding %}
<div class="card-wrapper" data-href="{% url 'weddings:wedding_detail' w.id %}">

    <div class="card shadow-lg rounded-4 border-0 position-relative wedding-card h-100">

        <div class="position-relative">
        
            <div class="rounded-top-4" style="height: 160px; background: {{ item.gradient }};"></div>
            
            <div class="position-absolute top-0 end-0 m-3 bg-white bg-opacity-25 rounded-circle p-2 shadow-sm" style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-file-lines text-white"></i>
            </div>

            <div class="position-absolute start-0 ms-3" style="bottom: -32px;">
                <div class="bg-white rounded-circle d-flex align-items-center justify-content-center shadow-lg" style="width: 64px; height: 64px;">
                    <span class="fs-5 fw-bold" style="color: var(--bs-primary);">
                        {% if w.groom_name and w.bride_name %}
                            {{ w.groom_name|slice:":1" }}&{{ w.bride_name|slice:":1" }}
                        {% elif item.client %}
                            {{ item.client.name|slice:":1" }}
                        {% else %}
                            --
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>
        <div class="card-body position-relative" style="padding-top: 48px !important;">

            <div class="d-flex justify-content-between align-items-start mb-1">
                <h5 class="fw-bold text-dark mb-0 me-2">
                    {{ w }}
                </h5>
                
                <div class="d-flex gap-2 flex-shrink-0">
                    <a href="#" 
                    class="btn-edit"
                    hx-get="{% url 'weddings:edit_wedding' w.id %}" 
                    hx-target="#modal-container"
                    data-bs-toggle="modal"
                    data-bs-target="#main-modal">
                        <i class="fas fa-pencil-alt"></i>
                    </a>
                    
                    <a href="#" 
                       class="btn-delete" 
                       title="Excluir"
                       hx-get="{% url 'weddings:delete_wedding' w.id %}"
                       hx-target="#modal-container"
                       data-bs-toggle="modal"
                       data-bs-target="#main-modal">
                        <i class="fas fa-trash-alt"></i>
                    </a>
                </div>
            </div>

            <p class="mb-1 text-muted"><i class="fas fa-calendar-days"></i> {{ w.date|date:"d \d\e F, Y" }}</p>
            <p class="mb-3 text-muted"><i class="fas fa-location-dot"></i> {{ w.location }}</p>

            <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="text-muted small">Progresso</span>
                <span class="small text-muted">65%</span>
            </div>
            
            <div class="progress mb-3" style="height: 8px;">
                <div class="progress-bar" role="progressbar" style="width: 65%; background: {{ item.gradient }};" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
            </div>

            <div class="d-flex justify-content-between text-center info-stats">
                <div><strong>{{ item.items_count }}</strong><br><small>Itens</small></div>
                <div><strong>{{ item.contracts_count }}</strong><br><small>Contratos</small></div>
            </div>
        </div>

    </div>
</div>
{% endwith %}