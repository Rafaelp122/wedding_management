{% comment %}
  Este partial renderiza o menu de dropdown (3 pontos)
  para o card de casamento.

  Ele espera uma variável 'w' (o objeto Wedding) 
  do template que o incluiu.
{% endcomment %}

<div class="dropdown">
    <button class="btn-edit border" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fas fa-ellipsis-h"></i>
    </button>
    <ul class="dropdown-menu dropdown-menu-end">
      <li><h6 class="dropdown-header">Ações do Casamento</h6></li>
      
      {% comment %} Ação ATUALIZAR (GET) {% endcomment %}
      <li><a class="dropdown-item" href="#"
             hx-get="{% url 'weddings:edit_wedding' w.id %}"
             hx-target="#form-modal-container"
             data-bs-toggle="modal"
             data-bs-target="#form-modal">
          <i class="fas fa-pencil-alt fa-fw me-2"></i> Atualizar
      </a></li>
      
      {% comment %} Ação DELETAR (GET) {% endcomment %}
      <li><a class="dropdown-item" href="#"
             hx-get="{% url 'weddings:delete_wedding' w.id %}"
             hx-target="#delete-modal-container"
             data-bs-toggle="modal"
             data-bs-target="#delete-modal">
          <i class="fas fa-trash-alt fa-fw me-2 text-danger"></i> Deletar
      </a></li>
      
      <li><hr class="dropdown-divider"></li>
      <li><h6 class="dropdown-header">Mudar Status</h6></li>
      
      {% comment %} Ações MUDAR STATUS (POST) {% endcomment %}
      {% if w.status != 'IN_PROGRESS' %}
      <li><a class="dropdown-item" href="#"
             hx-post="{% url 'weddings:update_wedding_status' w.id %}"
             hx-vals='{"status": "IN_PROGRESS", "csrfmiddlewaretoken": "{{ csrf_token }}"}'
             hx-target="#wedding-list-container"
             hx-swap="innerHTML">
          <i class="fas fa-spinner fa-fw me-2 text-warning"></i> Em Andamento
      </a></li>
      {% endif %}
      
      {% if w.status != 'COMPLETED' %}
      <li><a class="dropdown-item" href="#"
             hx-post="{% url 'weddings:update_wedding_status' w.id %}"
             hx-vals='{"status": "COMPLETED", "csrfmiddlewaretoken": "{{ csrf_token }}"}'
             hx-target="#wedding-list-container"
             hx-swap="innerHTML">
          <i class="fas fa-check-circle fa-fw me-2 text-success"></i> Concluído
      </a></li>
      {% endif %}
      
      {% if w.status != 'CANCELED' %}
      <li><a class="dropdown-item" href="#"
             hx-post="{% url 'weddings:update_wedding_status' w.id %}"
             hx-vals='{"status": "CANCELED", "csrfmiddlewaretoken": "{{ csrf_token }}"}'
             hx-target="#wedding-list-container"
             hx-swap="innerHTML">
          <i class="fas fa-times-circle fa-fw me-2 text-danger"></i> Cancelado
      </a></li>
      {% endif %}
    </ul>
</div>
