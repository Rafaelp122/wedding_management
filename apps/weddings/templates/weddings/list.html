{% extends 'base-apps.html' %}
{% load static %}
{% block page_title %} Meus Casamentos {% endblock %}

{% block page_styles %}
  <link rel="stylesheet" href="{% static 'weddings/css/list.css' %}">
{% endblock page_styles %}

{% block content %}
<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-bold">Meus Casamentos</h2>
      <p class="text-muted">Gerencie todos os detalhes dos seus eventos</p>
    </div>
    <a href="#" class="btn btn-primary">+ Novo Casamento</a>
  </div>

  <div class="row">
    {% for item in weddings_with_clients %}
      {% include 'weddings/partials/wedding_card.html' with item=item %}
    {% empty %}
      <div class="col-12">
        <div class="alert alert-info text-center">
          Você ainda não cadastrou nenhum casamento. <a href="#">Clique aqui para adicionar</a>.
        </div>
      </div>
    {% endfor %}
  
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.querySelectorAll('.card-wrapper').forEach(wrapper => {
    wrapper.addEventListener('click', function (e) {
      if (e.target.closest('a') || e.target.closest('form')) return;
      const link = this.getAttribute('data-href');
      if (link) {
        window.location.href = link;
      }
    });
  });
</script>
{% endblock %}
